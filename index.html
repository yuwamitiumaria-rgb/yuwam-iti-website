<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YUWAM ITI - Student Fees Management System</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f5f7fa; }
        .page-section { display: none; }
        .page-section.active { display: block; }
        .navbar { background: linear-gradient(135deg, #1e40af, #1e3a8a); color: white; padding: 1rem 0; position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .navbar .container { display: flex; justify-content: space-between; align-items: center; max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .logo { display: flex; align-items: center; gap: 1rem; }
        .logo h1 { font-size: 1.5rem; }
        .nav-links { display: flex; list-style: none; gap: 1rem; flex-wrap: wrap; }
        .nav-links a { color: #FFD700; font-weight: 700; font-size: 1.1rem; text-decoration: none; padding: 0.6rem 1rem; border-radius: 4px; transition: all 0.3s; }
        .nav-links a:hover { background: rgba(255,215,0,0.2); color: #FFFF00; }
        .nav-links a.active { background: rgba(255,215,0,0.3); color: #FFFF00; border-bottom: 3px solid #FFD700; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .form-group { margin-bottom: 1.5rem; }
        .form-group label { display: block; margin-bottom: 0.5rem; color: #1e40af; font-weight: 600; }
        .form-group input, .form-group select { width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px; font-size: 1rem; }
        .form-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; }
        .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 6px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.3s; }
        .btn-primary { background: linear-gradient(135deg, #1e40af, #1e3a8a); color: white; }
        .btn-success { background: linear-gradient(135deg, #16a34a, #15803d); color: white; }
        .btn-danger { background: linear-gradient(135deg, #dc2626, #b91c1c); color: white; }
        .btn-print { background: linear-gradient(135deg, #f59e0b, #d97706); color: white; }
        .table { width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .table th { background: linear-gradient(135deg, #1e40af, #1e3a8a); color: white; padding: 1rem; text-align: left; }
        .table td { padding: 1rem; border-bottom: 1px solid #eee; }
        .table tr:hover { background: #f9fafb; }
        .status-paid { color: #16a34a; font-weight: 600; }
        .status-unpaid { color: #dc2626; font-weight: 600; }
        .card { background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 2rem; }
        .receipt { background: white; padding: 2rem; border-radius: 8px; border: 2px solid #1e40af; margin-top: 2rem; }
        .receipt-header { text-align: center; border-bottom: 2px solid #1e40af; padding-bottom: 1rem; margin-bottom: 1rem; }
        .receipt-header h2 { color: #1e40af; margin-bottom: 0.5rem; }
        .receipt-row { display: flex; justify-content: space-between; padding: 0.5rem 0; border-bottom: 1px solid #eee; }
        .receipt-row.total { border-top: 2px solid #1e40af; border-bottom: 2px solid #1e40af; font-weight: 700; font-size: 1.2rem; color: #1e40af; }
        .receipt-footer { text-align: center; margin-top: 1rem; font-size: 0.9rem; color: #666; }
        .alert { padding: 1rem; border-radius: 6px; margin-bottom: 1rem; }
        .alert-success { background: #dcfce7; color: #166534; border: 1px solid #86efac; }
        .alert-error { background: #fee2e2; color: #991b1b; border: 1px solid #fca5a5; }
        .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem; }
        .stat-card { background: white; padding: 1.5rem; border-radius: 8px; text-align: center; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .stat-card h3 { color: #666; font-size: 0.9rem; margin-bottom: 0.5rem; }
        .stat-card .number { font-size: 2rem; color: #1e40af; font-weight: 700; }
        @media print { .navbar, .nav-links, .btn, .form-group { display: none !important; } .receipt { border: none; box-shadow: none; } }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <div class="logo">
                <h1>YUWAM ITI UMARIA</h1>
            </div>
            <ul class="nav-links">
                <li><a href="#" class="nav-btn active" data-page="home">Home</a></li>
                <li><a href="#" class="nav-btn" data-page="add-student">Add Student</a></li>
                <li><a href="#" class="nav-btn" data-page="fees-payment">Fees Payment</a></li>
                <li><a href="#" class="nav-btn" data-page="students-list">Students List</a></li>
                <li><a href="#" class="nav-btn" data-page="dashboard">Dashboard</a></li>
            </ul>
        </div>
    </nav>

    <!-- HOME PAGE -->
    <section class="page-section active" id="home">
        <div class="container">
            <div class="card" style="text-align: center; background: linear-gradient(135deg, #1e40af, #1e3a8a); color: white;">
                <h1 style="margin-bottom: 1rem;">Student Fees Management System</h1>
                <p style="font-size: 1.1rem; margin-bottom: 2rem;">YUWAM Pvt ITI Umaria - Professional Fee Collection & Tracking</p>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                    <button class="btn btn-primary" onclick="showPage('add-student')">‚ûï Add New Student</button>
                    <button class="btn btn-primary" onclick="showPage('fees-payment')">üí≥ Record Payment</button>
                    <button class="btn btn-primary" onclick="showPage('students-list')">üìã View Students</button>
                    <button class="btn btn-primary" onclick="showPage('dashboard')">üìä Dashboard</button>
                </div>
            </div>
        </div>
    </section>

    <!-- ADD STUDENT PAGE -->
    <section class="page-section" id="add-student">
        <div class="container">
            <div class="card">
                <h2 style="color: #1e40af; margin-bottom: 2rem;">‚ûï Add New Student</h2>
                <form id="addStudentForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Student Name *</label>
                            <input type="text" id="studentName" required placeholder="Enter full name">
                        </div>
                        <div class="form-group">
                            <label>Roll Number *</label>
                            <input type="text" id="rollNumber" required placeholder="e.g., 001">
                        </div>
                        <div class="form-group">
                            <label>Phone Number</label>
                            <input type="tel" id="phone" placeholder="Enter phone number">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Trade *</label>
                            <select id="trade" required>
                                <option value="">-- Select Trade --</option>
                                <option value="Electrician">Electrician</option>
                                <option value="Fitter">Fitter</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Year *</label>
                            <select id="year" required>
                                <option value="">-- Select Year --</option>
                                <option value="1st Year">1st Year</option>
                                <option value="2nd Year">2nd Year</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Admission Date</label>
                            <input type="date" id="admissionDate">
                        </div>
                    </div>
                    <button type="submit" class="btn btn-success" style="width: 100%;">‚úì Add Student</button>
                </form>
            </div>
        </div>
    </section>

    <!-- FEES PAYMENT PAGE -->
    <section class="page-section" id="fees-payment">
        <div class="container">
            <div class="card">
                <h2 style="color: #1e40af; margin-bottom: 2rem;">üí≥ Record Exam Fees Payment</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label>Select Student *</label>
                        <select id="selectStudent" required>
                            <option value="">-- Select Student --</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Exam Fees Amount</label>
                        <input type="number" id="examFees" value="500" readonly style="background: #f0f0f0;">
                    </div>
                    <div class="form-group">
                        <label>Payment Date</label>
                        <input type="date" id="paymentDate">
                    </div>
                </div>
                <button class="btn btn-success" onclick="recordPayment()" style="width: 100%;">‚úì Mark as Paid</button>
                <div id="paymentAlert"></div>
            </div>

            <!-- RECEIPT SECTION -->
            <div id="receiptSection" style="display: none;">
                <div class="receipt" id="receiptContent">
                    <div class="receipt-header">
                        <h2>YUWAM ITI UMARIA</h2>
                        <p>Exam Fees Payment Receipt</p>
                        <p style="font-size: 0.9rem; color: #666;">Near RC School, Peelikothi Road, Umaria</p>
                    </div>
                    <div id="receiptDetails"></div>
                    <div class="receipt-footer">
                        <p>Thank you for your payment!</p>
                        <p>For queries: 8319318007 | WhatsApp: 8871988777</p>
                    </div>
                </div>
                <div style="text-align: center; margin-top: 1rem;">
                    <button class="btn btn-print" onclick="window.print()">üñ®Ô∏è Print Receipt</button>
                    <button class="btn btn-primary" onclick="resetPaymentForm()">‚ûï Another Payment</button>
                </div>
            </div>
        </div>
    </section>

    <!-- STUDENTS LIST PAGE -->
    <section class="page-section" id="students-list">
        <div class="container">
            <h2 style="color: #1e40af; margin-bottom: 2rem;">üìã All Students</h2>
            <div class="form-group" style="margin-bottom: 2rem;">
                <input type="text" id="searchStudent" placeholder="üîç Search by name or roll number..." style="width: 100%; padding: 0.75rem; border: 1px solid #ddd; border-radius: 6px;">
            </div>
            <div class="card" style="overflow-x: auto;">
                <table class="table" id="studentsTable">
                    <thead>
                        <tr>
                            <th>Roll No</th>
                            <th>Student Name</th>
                            <th>Trade</th>
                            <th>Year</th>
                            <th>Phone</th>
                            <th>Exam Fees Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="studentsTableBody">
                        <tr><td colspan="7" style="text-align: center; color: #999;">No students added yet</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- DASHBOARD PAGE -->
    <section class="page-section" id="dashboard">
        <div class="container">
            <h2 style="color: #1e40af; margin-bottom: 2rem;">üìä Dashboard</h2>
            <div class="stats">
                <div class="stat-card">
                    <h3>Total Students</h3>
                    <div class="number" id="totalStudents">0</div>
                </div>
                <div class="stat-card">
                    <h3>Fees Paid</h3>
                    <div class="number" id="feesPaid">0</div>
                </div>
                <div class="stat-card">
                    <h3>Fees Pending</h3>
                    <div class="number" id="feesPending">0</div>
                </div>
                <div class="stat-card">
                    <h3>Total Collection</h3>
                    <div class="number" id="totalCollection">‚Çπ0</div>
                </div>
            </div>
            <div class="card" style="overflow-x: auto;">
                <h3 style="color: #1e40af; margin-bottom: 1rem;">Payment History</h3>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Student Name</th>
                            <th>Roll No</th>
                            <th>Trade</th>
                            <th>Amount</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="paymentHistoryBody">
                        <tr><td colspan="6" style="text-align: center; color: #999;">No payments recorded yet</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <script>
        let students = JSON.parse(localStorage.getItem('students')) || [];
        let payments = JSON.parse(localStorage.getItem('payments')) || [];

        function showPage(pageName) {
            document.querySelectorAll('.page-section').forEach(page => page.classList.remove('active'));
            document.getElementById(pageName).classList.add('active');
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`[data-page="${pageName}"]`).classList.add('active');
            
            if (pageName === 'students-list') loadStudentsList();
            if (pageName === 'fees-payment') loadStudentDropdown();
            if (pageName === 'dashboard') loadDashboard();
        }

        document.getElementById('addStudentForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const student = {
                id: Date.now(),
                name: document.getElementById('studentName').value,
                rollNumber: document.getElementById('rollNumber').value,
                phone: document.getElementById('phone').value,
                trade: document.getElementById('trade').value,
                year: document.getElementById('year').value,
                admissionDate: document.getElementById('admissionDate').value,
                feePaid: false
            };
            students.push(student);
            localStorage.setItem('students', JSON.stringify(students));
            alert('‚úì Student added successfully!');
            this.reset();
            showPage('students-list');
        });

        function loadStudentsList() {
            const tbody = document.getElementById('studentsTableBody');
            const searchTerm = document.getElementById('searchStudent').value.toLowerCase();
            
            const filtered = students.filter(s => 
                s.name.toLowerCase().includes(searchTerm) || 
                s.rollNumber.toLowerCase().includes(searchTerm)
            );

            if (filtered.length === 0) {
                tbody.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #999;">No students found</td></tr>';
                return;
            }

            tbody.innerHTML = filtered.map(student => `
                <tr>
                    <td>${student.rollNumber}</td>
                    <td>${student.name}</td>
                    <td>${student.trade}</td>
                    <td>${student.year}</td>
                    <td>${student.phone}</td>
                    <td><span class="${student.feePaid ? 'status-paid' : 'status-unpaid'}">${student.feePaid ? '‚úì Paid' : '‚úó Unpaid'}</span></td>
                    <td>
                        <button class="btn btn-danger" onclick="deleteStudent(${student.id})" style="padding: 0.5rem 1rem; font-size: 0.9rem;">Delete</button>
                    </td>
                </tr>
            `).join('');
        }

        function loadStudentDropdown() {
            const select = document.getElementById('selectStudent');
            select.innerHTML = '<option value="">-- Select Student --</option>';
            students.forEach(student => {
                const status = student.feePaid ? ' (‚úì Paid)' : ' (‚úó Unpaid)';
                select.innerHTML += `<option value="${student.id}">${student.name} - ${student.rollNumber}${status}</option>`;
            });
        }

        function recordPayment() {
            const studentId = parseInt(document.getElementById('selectStudent').value);
            const paymentDate = document.getElementById('paymentDate').value || new Date().toISOString().split('T')[0];
            
            if (!studentId) {
                document.getElementById('paymentAlert').innerHTML = '<div class="alert alert-error">Please select a student</div>';
                return;
            }

            const student = students.find(s => s.id === studentId);
            if (!student) return;

            student.feePaid = true;
            const payment = {
                date: paymentDate,
                studentId: studentId,
                studentName: student.name,
                rollNumber: student.rollNumber,
                trade: student.trade,
                amount: 500
            };
            payments.push(payment);
            localStorage.setItem('students', JSON.stringify(students));
            localStorage.setItem('payments', JSON.stringify(payments));

            const receiptHTML = `
                <div class="receipt-row"><span>Student Name:</span><strong>${student.name}</strong></div>
                <div class="receipt-row"><span>Roll Number:</span><strong>${student.rollNumber}</strong></div>
                <div class="receipt-row"><span>Trade:</span><strong>${student.trade}</strong></div>
                <div class="receipt-row"><span>Year:</span><strong>${student.year}</strong></div>
                <div class="receipt-row"><span>Payment Date:</span><strong>${paymentDate}</strong></div>
                <div class="receipt-row total"><span>Exam Fees Paid:</span><strong>‚Çπ500</strong></div>
                <div class="receipt-row"><span>Receipt Number:</span><strong>#${payment.date.replace(/-/g, '')}${student.rollNumber}</strong></div>
            `;
            document.getElementById('receiptDetails').innerHTML = receiptHTML;
            document.getElementById('receiptSection').style.display = 'block';
            document.getElementById('paymentAlert').innerHTML = '<div class="alert alert-success">‚úì Payment recorded successfully!</div>';
        }

        function resetPaymentForm() {
            document.getElementById('selectStudent').value = '';
            document.getElementById('paymentDate').value = '';
            document.getElementById('paymentAlert').innerHTML = '';
            document.getElementById('receiptSection').style.display = 'none';
            loadStudentDropdown();
        }

        function deleteStudent(id) {
            if (confirm('Are you sure you want to delete this student?')) {
                students = students.filter(s => s.id !== id);
                localStorage.setItem('students', JSON.stringify(students));
                loadStudentsList();
            }
        }

        function loadDashboard() {
            const totalStudents = students.length;
            const feesPaid = students.filter(s => s.feePaid).length;
            const feesPending = totalStudents - feesPaid;
            const totalCollection = feesPaid * 500;

            document.getElementById('totalStudents').textContent = totalStudents;
            document.getElementById('feesPaid').textContent = feesPaid;
            document.getElementById('feesPending').textContent = feesPending;
            document.getElementById('totalCollection').textContent = '‚Çπ' + totalCollection.toLocaleString();

            const historyBody = document.getElementById('paymentHistoryBody');
            if (payments.length === 0) {
                historyBody.innerHTML = '<tr><td colspan="6" style="text-align: center; color: #999;">No payments recorded yet</td></tr>';
            } else {
                historyBody.innerHTML = payments.map(p => `
                    <tr>
                        <td>${p.date}</td>
                        <td>${p.studentName}</td>
                        <td>${p.rollNumber}</td>
                        <td>${p.trade}</td>
                        <td>‚Çπ${p.amount}</td>
                        <td><span class="status-paid">‚úì Paid</span></td>
                    </tr>
                `).join('');
            }
        }

        document.getElementById('searchStudent')?.addEventListener('keyup', loadStudentsList);

        document.querySelectorAll('.nav-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.preventDefault();
                showPage(btn.getAttribute('data-page'));
            });
        });

        const today = new Date().toISOString().split('T')[0];
        if (document.getElementById('admissionDate')) document.getElementById('admissionDate').value = today;
        if (document.getElementById('paymentDate')) document.getElementById('paymentDate').value = today;
    </script>
</body>
</html>
